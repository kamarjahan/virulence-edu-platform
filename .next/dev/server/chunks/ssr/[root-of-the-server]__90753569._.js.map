{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/virulence-edu-platform/src/firebase.js"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\nimport { getAuth, GoogleAuthProvider } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDRzV8KyaJv85Zo1AbhX-DO_gkAqlE_umw\",\n  authDomain: \"virulence-edu.firebaseapp.com\",\n  projectId: \"virulence-edu\",\n  storageBucket: \"virulence-edu.firebasestorage.app\",\n  messagingSenderId: \"321729050326\",\n  appId: \"1:321729050326:web:3d4e1854dc2746c40d3b77\",\n  measurementId: \"G-V5LCPSCF12\"\n};\n\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\nexport const auth = getAuth(app);\nexport const googleProvider = new GoogleAuthProvider();\nexport const db = getFirestore(app);"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,MAAM,MAAM,CAAC,IAAA,2KAAO,IAAG,MAAM,GAAG,IAAA,iLAAa,EAAC,kBAAkB,IAAA,0KAAM;AAC/D,MAAM,OAAO,IAAA,6KAAO,EAAC;AACrB,MAAM,iBAAiB,IAAI,wLAAkB;AAC7C,MAAM,KAAK,IAAA,iLAAY,EAAC"}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/virulence-edu-platform/src/components/Navbar.js"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from 'react';\nimport { auth, googleProvider, db } from '../firebase';\nimport { signInWithPopup, signOut, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, sendPasswordResetEmail, updateProfile } from 'firebase/auth';\nimport { doc, setDoc, getDoc } from 'firebase/firestore';\nimport Link from 'next/link';\nimport { FaGoogle, FaUserGraduate, FaTimes, FaHeadset, FaUserCircle, FaShieldAlt, FaBars } from 'react-icons/fa';\n\nexport default function Navbar() {\n  const [user, setUser] = useState(null);\n  const [userData, setUserData] = useState(null);\n  const [showModal, setShowModal] = useState(false);\n  \n  // Auth State: 'login' | 'signup' | 'forgot'\n  const [authMode, setAuthMode] = useState('login'); \n  \n  // Form Inputs\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [phone, setPhone] = useState('');\n  const [password, setPassword] = useState('');\n  \n  // Feedback\n  const [error, setError] = useState('');\n  const [msg, setMsg] = useState('');\n\n  // 1. Monitor Authentication\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (u) => {\n      setUser(u);\n      if (u) {\n        setShowModal(false);\n        // Fetch User Role & Photo\n        const docSnap = await getDoc(doc(db, \"users\", u.uid));\n        if (docSnap.exists()) setUserData(docSnap.data());\n      } else {\n        setUserData(null);\n      }\n    });\n    return () => unsubscribe();\n  }, []);\n\n  // 2. Google Login\n  const handleGoogle = async () => {\n    try { \n      const res = await signInWithPopup(auth, googleProvider);\n      const u = res.user;\n      \n      // Save Google User to DB if new\n      const userRef = doc(db, \"users\", u.uid);\n      const userSnap = await getDoc(userRef);\n      if (!userSnap.exists()) {\n        await setDoc(userRef, {\n          name: u.displayName, \n          email: u.email, \n          photo: u.photoURL,\n          phone: \"\", \n          course: \"Not Allotted\", \n          role: \"student\", \n          createdAt: new Date().toISOString()\n        });\n      }\n    } catch (e) { setError(e.message); }\n  };\n\n  // 3. Email Auth (Login & Sign Up)\n  const handleAuth = async (e) => {\n    e.preventDefault();\n    setError(''); setMsg('');\n    \n    try {\n      if (authMode === 'signup') {\n        // A. CREATE ACCOUNT\n        if(!name || !phone) return setError(\"Name and Phone are required for signup.\");\n        \n        const res = await createUserWithEmailAndPassword(auth, email, password);\n        const u = res.user;\n        \n        // Update Auth Profile\n        await updateProfile(u, { displayName: name });\n        \n        // Save to Firestore Database\n        await setDoc(doc(db, \"users\", u.uid), {\n          name: name,\n          email: email,\n          phone: phone,\n          photo: \"\",\n          course: \"Not Allotted\",\n          role: \"student\",\n          createdAt: new Date().toISOString()\n        });\n        \n        setMsg(\"Account Created! Redirecting...\");\n\n      } else if (authMode === 'login') {\n        // B. LOGIN\n        await signInWithEmailAndPassword(auth, email, password);\n      \n      } else if (authMode === 'forgot') {\n        // C. FORGOT PASSWORD\n        await sendPasswordResetEmail(auth, email);\n        setMsg('Reset link sent to your email!');\n      }\n    } catch (err) { \n        setError(err.message.replace(\"Firebase:\", \"\").replace(\"auth/\", \"\")); \n    }\n  };\n\n  // Helper to check Admin Role\n  const isAdmin = userData?.role && ['Full Control', 'Manager', 'Staff', 'Viewer'].includes(userData.role);\n\n  return (\n    <>\n      <nav className=\"bg-white/95 backdrop-blur border-b sticky top-0 z-50 h-16 px-4 md:px-8 flex items-center justify-between shadow-sm\">\n        <Link href=\"/\" className=\"font-bold text-xl tracking-tight text-slate-900\">VIRULENCE <span className=\"text-teal-600\">EDU</span></Link>\n        \n        <div className=\"flex items-center gap-4 text-sm font-medium\">\n          <Link href=\"/\" className=\"hidden md:block hover:text-teal-600\">Home</Link>\n          <Link href=\"/#courses\" className=\"hidden md:block hover:text-teal-600\">Courses</Link>\n          \n          {user && <Link href=\"/tickets\" className=\"flex items-center gap-1 text-teal-600\"><FaHeadset /> Support</Link>}\n\n          {/* ADMIN BUTTON */}\n          {(isAdmin || user?.email === 'contact@kamarjahan.in') && (\n            <Link href=\"/admin\" className=\"flex items-center gap-1 text-red-600 border border-red-200 px-2 py-1 rounded text-xs font-bold uppercase hover:bg-red-50\">\n               <FaShieldAlt/> {userData?.role || 'Admin'}\n            </Link>\n          )}\n\n          {user ? (\n            <div className=\"flex items-center gap-3 pl-3 border-l ml-3\">\n               <Link href=\"/profile\">\n                 {userData?.photo ? (\n                    <img src={userData.photo} className=\"w-9 h-9 rounded-full border object-cover\" alt=\"User\"/>\n                 ) : (\n                    <FaUserCircle className=\"text-3xl text-slate-400\"/>\n                 )}\n               </Link>\n            </div>\n          ) : (\n            <button onClick={() => { setShowModal(true); setAuthMode('login'); }} className=\"bg-slate-900 text-white px-5 py-2 rounded-full font-bold text-xs flex items-center gap-2 hover:bg-slate-800 transition\">\n              <FaUserGraduate /> Student Login\n            </button>\n          )}\n        </div>\n      </nav>\n\n      {/* LOGIN / SIGNUP MODAL */}\n      {showModal && (\n        <div className=\"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4 backdrop-blur-sm\">\n          <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-sm relative overflow-hidden animate-fadeIn\">\n            <button onClick={() => setShowModal(false)} className=\"absolute top-4 right-4 text-slate-400 hover:text-slate-600\"><FaTimes /></button>\n            \n            <div className=\"p-8\">\n               <h2 className=\"text-2xl font-bold mb-1 text-slate-900 capitalize\">\n                 {authMode === 'login' ? 'Welcome Back' : authMode === 'signup' ? 'Create Account' : 'Reset Password'}\n               </h2>\n               <p className=\"text-slate-500 text-xs mb-6\">Virulence Student Portal</p>\n\n               {/* Feedback Messages */}\n               {error && <p className=\"bg-red-50 text-red-600 p-3 rounded text-xs mb-4 font-semibold border border-red-100\">{error}</p>}\n               {msg && <p className=\"bg-green-50 text-green-600 p-3 rounded text-xs mb-4 font-semibold border border-green-100\">{msg}</p>}\n\n               {/* Google Button (Only for Login/Signup) */}\n               {authMode !== 'forgot' && (\n                 <button onClick={handleGoogle} className=\"w-full border border-slate-300 p-2.5 mb-5 rounded-lg text-sm font-bold flex justify-center items-center gap-2 text-slate-700 hover:bg-slate-50 transition\">\n                    <FaGoogle className=\"text-red-500\"/> Continue with Google\n                 </button>\n               )}\n               \n               {authMode !== 'forgot' && <div className=\"text-center text-xs text-slate-400 mb-4\">- OR -</div>}\n\n               {/* FORM */}\n               <form onSubmit={handleAuth} className=\"space-y-3\">\n                 \n                 {/* SIGN UP FIELDS */}\n                 {authMode === 'signup' && (\n                    <>\n                        <div>\n                            <input \n                                type=\"text\" \n                                placeholder=\"Full Name\" \n                                className=\"w-full border p-2.5 rounded-lg text-sm focus:outline-none focus:border-teal-500\"\n                                value={name}\n                                onChange={e => setName(e.target.value)}\n                                required\n                            />\n                        </div>\n                        <div>\n                            <input \n                                type=\"tel\" \n                                placeholder=\"Phone Number\" \n                                className=\"w-full border p-2.5 rounded-lg text-sm focus:outline-none focus:border-teal-500\"\n                                value={phone}\n                                onChange={e => setPhone(e.target.value)}\n                                required\n                            />\n                        </div>\n                    </>\n                 )}\n\n                 {/* COMMON FIELDS */}\n                 <div>\n                    <input \n                        type=\"email\" \n                        placeholder=\"Email Address\" \n                        className=\"w-full border p-2.5 rounded-lg text-sm focus:outline-none focus:border-teal-500\"\n                        value={email}\n                        onChange={e => setEmail(e.target.value)}\n                        required\n                    />\n                 </div>\n\n                 {authMode !== 'forgot' && (\n                     <div>\n                        <input \n                            type=\"password\" \n                            placeholder=\"Password\" \n                            className=\"w-full border p-2.5 rounded-lg text-sm focus:outline-none focus:border-teal-500\"\n                            value={password}\n                            onChange={e => setPassword(e.target.value)}\n                            required\n                        />\n                     </div>\n                 )}\n\n                 <button className=\"w-full bg-slate-900 text-white py-2.5 rounded-lg font-bold text-sm hover:bg-slate-800 transition capitalize\">\n                    {authMode === 'login' ? 'Login Securely' : authMode === 'signup' ? 'Register Now' : 'Send Reset Link'}\n                 </button>\n               </form>\n\n               {/* TOGGLES */}\n               <div className=\"mt-6 text-center text-xs space-y-2\">\n                 {authMode === 'login' && (\n                   <>\n                     <p><button onClick={() => setAuthMode('forgot')} className=\"text-slate-400 hover:text-slate-600\">Forgot Password?</button></p>\n                     <p className=\"mt-2 text-slate-600\">No account yet? <button onClick={() => setAuthMode('signup')} className=\"text-teal-600 font-bold hover:underline\">Create Account</button></p>\n                   </>\n                 )}\n                 {authMode === 'signup' && (\n                    <p className=\"text-slate-600\">Already have an account? <button onClick={() => setAuthMode('login')} className=\"text-teal-600 font-bold hover:underline\">Login Here</button></p>\n                 )}\n                 {authMode === 'forgot' && (\n                    <p><button onClick={() => setAuthMode('login')} className=\"text-teal-600 font-bold hover:underline\">Back to Login</button></p>\n                 )}\n               </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 667, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/virulence-edu-platform/src/app/profile/page.js"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from 'react';\nimport { auth, db } from '@/firebase';\nimport { doc, getDoc, setDoc } from 'firebase/firestore'; // Using setDoc to fix \"No document\" error\nimport { updatePassword, signOut, reauthenticateWithCredential, EmailAuthProvider } from 'firebase/auth'; // Added re-auth imports\nimport Navbar from '@/components/Navbar';\nimport { FaUserEdit, FaBookReader, FaLock, FaSave, FaSignOutAlt } from 'react-icons/fa';\n\nexport default function Profile() {\n  const [user, setUser] = useState(null);\n  // Initialize with empty strings to prevent input errors\n  const [profile, setProfile] = useState({ name: '', phone: '', email: '', course: '', photo: '' });\n  const [loading, setLoading] = useState(true);\n  const [editing, setEditing] = useState(false);\n  \n  // Password Change State\n  const [currentPass, setCurrentPass] = useState('');\n  const [newPass, setNewPass] = useState('');\n  const [passMsg, setPassMsg] = useState('');\n\n  // 1. Fetch Data\n  useEffect(() => {\n    const unsub = auth.onAuthStateChanged(async (u) => {\n      if (u) {\n        setUser(u);\n        const docRef = doc(db, \"users\", u.uid);\n        const docSnap = await getDoc(docRef);\n        \n        if (docSnap.exists()) {\n          const data = docSnap.data();\n          setProfile({\n            name: data.name || '',\n            phone: data.phone || '',\n            email: data.email || u.email || '',\n            course: data.course || 'Not Allotted',\n            photo: data.photo || ''\n          });\n        } else {\n          // Defaults if no DB entry exists\n          setProfile({\n             name: u.displayName || '', \n             email: u.email || '', \n             photo: u.photoURL || '', \n             course: 'Not Allotted', \n             phone: '' \n          });\n        }\n      } else {\n        window.location.href = '/'; // Redirect if not logged in\n      }\n      setLoading(false);\n    });\n    return () => unsub();\n  }, []);\n\n  // 2. Update Profile Handler (Using setDoc to fix missing file error)\n  const handleUpdate = async (e) => {\n    e.preventDefault();\n    try {\n      await setDoc(doc(db, \"users\", user.uid), {\n        name: profile.name,\n        phone: profile.phone,\n        photo: profile.photo,\n        email: profile.email\n      }, { merge: true });\n      \n      setEditing(false);\n      alert(\"Profile Updated Successfully!\");\n    } catch (err) {\n      alert(\"Error updating profile: \" + err.message);\n    }\n  };\n\n  // 3. Change Password Handler (With Re-authentication)\n  const handleChangePassword = async () => {\n    if (!newPass || !currentPass) return setPassMsg(\"Please enter both current and new passwords.\");\n    \n    setPassMsg(\"Verifying...\");\n    try {\n      // Step A: Re-authenticate User (Security Check)\n      const credential = EmailAuthProvider.credential(user.email, currentPass);\n      await reauthenticateWithCredential(user, credential);\n      \n      // Step B: Update Password\n      await updatePassword(user, newPass);\n      \n      setPassMsg(\"Success! Logging out...\");\n      setTimeout(() => {\n        signOut(auth);\n        window.location.href = '/';\n      }, 2000);\n\n    } catch (err) {\n      console.error(err);\n      if(err.code === 'auth/wrong-password' || err.code === 'auth/invalid-credential') {\n        setPassMsg(\"Incorrect Current Password.\");\n      } else if (err.code === 'auth/requires-recent-login') {\n        setPassMsg(\"Session timeout. Please Log Out and Log In again.\");\n      } else {\n        setPassMsg(\"Error: \" + err.message);\n      }\n    }\n  };\n\n  if (loading) return <div className=\"p-20 text-center animate-pulse\">Loading Profile...</div>;\n\n  return (\n    <div className=\"min-h-screen bg-slate-50\">\n      <Navbar />\n      <div className=\"max-w-4xl mx-auto p-6\">\n        \n        {/* HEADER SECTION */}\n        <div className=\"bg-white rounded-xl shadow-sm border overflow-hidden mb-6\">\n          <div className=\"bg-slate-900 h-32 relative\"></div>\n          <div className=\"px-8 pb-8 flex flex-col md:flex-row items-end -mt-12 gap-6\">\n            <div className=\"relative\">\n                <img src={profile.photo || \"https://i.ibb.co/5cQ3t0N/user-placeholder.png\"} \n                     alt=\"Profile\" \n                     className=\"w-32 h-32 rounded-full border-4 border-white bg-white object-cover shadow-md\" />\n            </div>\n            <div className=\"flex-1 mb-2\">\n                <h1 className=\"text-2xl font-bold text-slate-900\">{profile.name}</h1>\n                <p className=\"text-slate-500 text-sm\">{profile.email}</p>\n            </div>\n            <div className=\"mb-2 flex flex-wrap gap-2\">\n                <button onClick={() => setEditing(!editing)} className=\"flex items-center gap-2 bg-slate-100 hover:bg-slate-200 text-slate-700 px-4 py-2 rounded-lg font-bold text-sm transition\">\n                   <FaUserEdit /> {editing ? \"Cancel\" : \"Edit Profile\"}\n                </button>\n                <button onClick={() => signOut(auth)} className=\"flex items-center gap-2 bg-red-50 hover:bg-red-100 text-red-600 px-4 py-2 rounded-lg font-bold text-sm transition border border-red-100\">\n                   <FaSignOutAlt /> Sign Out\n                </button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-6\">\n            {/* LEFT: DETAILS FORM */}\n            <div className=\"md:col-span-2 bg-white rounded-xl shadow-sm border p-6\">\n                <h2 className=\"font-bold text-lg mb-4 flex items-center gap-2 text-slate-800\"><FaUserEdit className=\"text-teal-600\"/> Personal Details</h2>\n                \n                <form onSubmit={handleUpdate} className=\"space-y-4\">\n                    <div className=\"grid md:grid-cols-2 gap-4\">\n                        <div>\n                            <label className=\"text-xs font-bold text-slate-500 uppercase block mb-1\">Full Name</label>\n                            <input disabled={!editing} value={profile.name || ''} onChange={e => setProfile({...profile, name: e.target.value})} \n                                   className={`w-full p-2 border rounded ${editing ? 'bg-white border-teal-500' : 'bg-slate-50'}`} />\n                        </div>\n                        <div>\n                            <label className=\"text-xs font-bold text-slate-500 uppercase block mb-1\">Phone Number</label>\n                            <input disabled={!editing} value={profile.phone || ''} onChange={e => setProfile({...profile, phone: e.target.value})} \n                                   placeholder=\"+91...\"\n                                   className={`w-full p-2 border rounded ${editing ? 'bg-white border-teal-500' : 'bg-slate-50'}`} />\n                        </div>\n                    </div>\n                    \n                    <div>\n                        <label className=\"text-xs font-bold text-slate-500 uppercase block mb-1\">Email (Read Only)</label>\n                        <input disabled value={profile.email || ''} className=\"w-full p-2 border rounded bg-slate-100 text-slate-500 cursor-not-allowed\" />\n                    </div>\n\n                    {editing && (\n                        <div>\n                            <label className=\"text-xs font-bold text-slate-500 uppercase block mb-1\">Profile Photo (ImgBB Link)</label>\n                            <div className=\"flex gap-2\">\n                                <input value={profile.photo || ''} onChange={e => setProfile({...profile, photo: e.target.value})} \n                                       placeholder=\"Paste ImgBB or Image URL here\"\n                                       className=\"w-full p-2 border rounded bg-white\" />\n                                <a href=\"https://imgbb.com\" target=\"_blank\" className=\"bg-slate-200 px-3 py-2 rounded text-xs font-bold flex items-center\">Upload</a>\n                            </div>\n                        </div>\n                    )}\n\n                    {editing && (\n                        <div className=\"pt-2\">\n                            <button className=\"bg-teal-600 text-white px-6 py-2 rounded font-bold hover:bg-teal-700 flex items-center gap-2 transition\">\n                                <FaSave /> Save Changes\n                            </button>\n                        </div>\n                    )}\n                </form>\n            </div>\n\n            {/* RIGHT: COURSE & SECURITY */}\n            <div className=\"space-y-6\">\n                \n                {/* COURSE CARD */}\n                <div className=\"bg-white rounded-xl shadow-sm border p-6\">\n                    <h2 className=\"font-bold text-lg mb-4 flex items-center gap-2 text-slate-800\"><FaBookReader className=\"text-teal-600\"/> Allotted Course</h2>\n                    <div className=\"bg-teal-50 border border-teal-100 p-4 rounded-lg text-center\">\n                        <div className=\"text-2xl font-bold text-teal-700\">{profile.course || \"None\"}</div>\n                        <p className=\"text-xs text-teal-600 mt-1\">Status: Active</p>\n                    </div>\n                </div>\n\n                {/* PASSWORD CARD */}\n                <div className=\"bg-white rounded-xl shadow-sm border p-6\">\n                    <h2 className=\"font-bold text-lg mb-4 flex items-center gap-2 text-slate-800\"><FaLock className=\"text-teal-600\"/> Security</h2>\n                    <div className=\"space-y-3\">\n                        <input type=\"password\" placeholder=\"Current Password\" value={currentPass} onChange={e => setCurrentPass(e.target.value)} \n                               className=\"w-full p-2 border rounded text-sm bg-slate-50 focus:bg-white\" />\n                        <input type=\"password\" placeholder=\"New Password\" value={newPass} onChange={e => setNewPass(e.target.value)} \n                               className=\"w-full p-2 border rounded text-sm bg-slate-50 focus:bg-white\" />\n                        \n                        <button onClick={handleChangePassword} className=\"w-full bg-slate-900 text-white py-2 rounded font-bold text-sm hover:bg-slate-800 transition\">\n                            Update Password\n                        </button>\n                        \n                        {passMsg && (\n                            <p className={`text-xs text-center font-bold p-2 rounded ${passMsg.includes('Success') ? 'bg-green-100 text-green-700' : 'bg-red-50 text-red-500'}`}>\n                                {passMsg}\n                            </p>\n                        )}\n                    </div>\n                </div>\n\n            </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}